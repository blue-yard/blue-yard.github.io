const isDebug=0,fr=60,runForFrames=666,amount=7,phi=1.6180339887,phimajor=1/phi,phiminor=1-1/phi;let spark=[];function setup(){createCanvas(windowWidth,windowHeight),frameRate(fr),ellipseMode(CENTER),rectMode(CENTER),angleMode(DEGREES),colorMode(HSL),noStroke();for(let t=0;t<amount;t++)spark.push(new Spark);debug=createGraphics(100,100)}function draw(){1==isDebug&&showDebug(),frameCount>=runForFrames&&noLoop(),translate(width/2,height*phiminor);for(let t in spark){spark[t].move(),spark[t].display();const i=16;spark[t].rot=-16+random(-i,i)}}function showDebug(){debug.background(255),debug.textSize(32),debug.fill(0,0,50),debug.text(frameCount,10,40),image(debug,0,0)}function restart(){spark=[],setup(),frameCount=0}function windowResized(){resizeCanvas(windowWidth,windowHeight),restart()}class Spark{constructor(){this.x=random(-width,width),this.y=random(-height,height),this.minsize=width/4,this.maxsize=width,this.stretch=this.maxsize/this.minsize*4,this.size=random(this.minsize,this.maxsize),this.length=this.size,this.width=this.size/this.stretch,this.speed=.005*noise(0,amount);this.hue=227-random(0,30),this.sat=random(22,62),this.lig=random(22,62),this.alp=random(.002,.004)}move(){const t=this.speed,i=this.length*t,s=t+.01*abs(this.x)*i,h=t+.01*abs(this.y)*i,e=height/100,a=10*h;this.x+=s,abs(this.x)>width&&(this.x=random(-width,width)),this.y<e&&this.y>0?this.y-=h:this.y>-e&&this.y<0?this.y+=h:this.y>e?this.y+=h:this.y-=h,(abs(this.y)<a||abs(this.y)>height)&&(this.y=random(-height,height))}display(){rotate(this.rot),fill(this.hue,this.sat,this.lig,this.alp),ellipse(this.x,this.y,this.length,this.width),rotate(-this.rot)}}