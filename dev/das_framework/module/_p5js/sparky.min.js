const fr=30,amount=111,phi=1.6180339887,phimajor=1/phi,phiminor=1-1/phi;let spark=[];function setup(){createCanvas(windowWidth,windowHeight),frameRate(fr),ellipseMode(CENTER),rectMode(CENTER),angleMode(DEGREES),colorMode(HSL),noStroke();for(let t=0;t<amount;t++)spark.push(new Spark)}function draw(){clear(),translate(width/2,height*phiminor);for(let t in spark)spark[t].move(),spark[t].display()}function windowResized(){resizeCanvas(windowWidth,windowHeight),restart()}function restart(){spark=[],setup(),frameCount=0}class Spark{constructor(){this.x=-width,this.y=random(-height/128,height/128),this.minsize=width/128,this.maxsize=width/3,this.size=random(this.minsize,this.maxsize),this.length=this.size,this.width=1,this.speed=.02*noise(0,amount),this.hue=227+random(-60,60),this.sat=random(100/3,100),this.lig=random(50,100),this.alp=.5;this.rot=-9+random(-4,4)}move(){const t=this.speed,i=this.length*t,h=t+.023*abs(this.x)*i,s=t+.0015*abs(this.y)*i,e=height/32,a=s/3;this.x+=h,abs(this.x)>width&&(this.x=-width,this.y=random(-height/8,height/8)),this.y<e&&this.y>0?this.y-=s:this.y>-e&&this.y<0?this.y+=s:this.y>e?this.y+=s:this.y-=s,(abs(this.y)<a||abs(this.y)>height)&&(this.x=-width,this.y=random(-height,height))}display(){fill(this.hue,this.sat,this.lig,this.alp),rotate(this.rot),ellipse(this.x,this.y,this.length,this.width),rotate(-this.rot)}}